<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Removed restrictive CSP to allow Gemini API calls in this environment -->
    <title>Sushruta - AI Health Assistant</title>
    
    <!-- Scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Virtual Keyboard -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/css/index.min.css">
    <script src="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/index.js"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Base styles for all devices */
        html, body {
            height: 100%;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent; /* Disable tap highlight on mobile */
        }
        body {
            font-family: 'Inter', 'Noto Sans Devanagari', sans-serif;
            background: linear-gradient(135deg, #F9A825 0%, #F57F17 50%, #E65100 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px; 
        }
        
        .chat-container {
            position: relative;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #F9A825 0%, #F57F17 50%, #E65100 100%);
            background-size: 200% 200%; /* For gradient animation */
            animation: gradient-animation 15s ease infinite; /* Added animation */
            color: white;
            padding: 1rem 1.5rem 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            flex-shrink: 0;
        }
        
        @keyframes gradient-animation { /* Keyframes for gradient animation */
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .logo-container {
            position: relative;
            z-index: 10;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            width: 100%;
            max-width: 280px;
            margin: 0.75rem auto 0;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 1rem;
            padding: 0.75rem;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }
        
        .lang-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 1rem;
        }
        
        .lang-btn {
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .lang-btn:hover, .lang-btn.active {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }
        
        .disclaimer-banner {
            background: linear-gradient(90deg, #ef4444, #dc2626);
            color: white;
            text-align: center;
            font-size: 0.8rem;
            padding: 0.75rem 1rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .disclaimer-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shimmer 3s infinite;
        }
        
        .quick-actions {
            padding: 0.75rem;
            background: #f8fffe;
            display: flex;
            overflow-x: auto;
            flex-wrap: nowrap;
            justify-content: flex-start; /* Changed for better scroll alignment */
            gap: 0.75rem;
            border-bottom: 2px solid #e5e7eb;
            position: sticky;
            top: 0;
            z-index: 20;
            flex-shrink: 0;
            /* Removed properties that hide scrollbar for cross-browser visibility */
        }
        
        .quick-actions::-webkit-scrollbar {
            height: 8px; /* Made scrollbar visible */
        }
        
        /* Added styles for a custom scrollbar */
        .quick-actions::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 4px;
        }
        
        .quick-actions::-webkit-scrollbar-thumb {
            background: #fbbf24;
            border-radius: 4px;
        }
        .quick-actions::-webkit-scrollbar-thumb:hover {
            background: #f59e0b;
        }
        
        .quick-btn {
            padding: 0.5rem 0.75rem;
            border-radius: 1rem;
            background: white;
            border: 2px solid #e5e7eb;
            color: #374151;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            flex-shrink: 0;
        }
        
        .quick-btn .icon {
            font-size: 1.25rem;
        }
        
        .quick-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(249, 168, 37, 0.2);
            border-color: #F9A825;
            color: #F9A825;
        }
        
        .quick-btn.emergency, .quick-btn.women, .quick-btn.mental-health {
            color: white;
        }
        
        .quick-btn.emergency {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-color: #dc2626;
        }
        
        .quick-btn.emergency:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            box-shadow: 0 8px 20px rgba(220, 38, 38, 0.4);
        }
        
        .quick-btn.women {
            background: linear-gradient(135deg, #ec4899, #db2777);
            border-color: #db2777;
        }
        
        .quick-btn.women:hover {
            background: linear-gradient(135deg, #db2777, #be185d);
            box-shadow: 0 8px 20px rgba(219, 39, 119, 0.4);
        }

        .quick-btn.mental-health {
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            border-color: #0ea5e9;
        }
        
        .quick-btn.mental-health:hover {
            background: linear-gradient(135deg, #0ea5e9, #0284c7);
            box-shadow: 0 8px 20px rgba(14, 165, 233, 0.4);
        }

        .disease-alert {
            padding: 1rem 2.5rem 1rem 1rem; /* Added padding for the close button */
            margin: 0 1.5rem;
            background: linear-gradient(135deg, #eff6ff, #dbeafe);
            border: 2px solid #93c5fd;
            border-radius: 1rem;
            position: relative;
            top: -1rem;
            z-index: 15;
            box-shadow: 0 8px 20px rgba(191, 219, 254, 0.5);
            transition: all 0.5s ease-in-out; /* Added for smooth collapse */
        }

        .alert-close-btn {
            position: absolute;
            top: 50%;
            right: 0.5rem;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            color: #1e3a8a;
            font-size: 1.75rem;
            line-height: 1;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            border-radius: 50%;
            transition: background-color 0.2s ease;
        }

        .alert-close-btn:hover {
            background-color: rgba(30, 64, 175, 0.1);
        }

        .alert-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #1e3a8a;
            margin-bottom: 0.5rem;
        }

        .alert-content p {
            margin-bottom: 0.5rem;
            color: #1e40af;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .alert-content strong {
            font-weight: 600;
            color: #1c3d8a;
        }

        .chat-area {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            background: linear-gradient(180deg, #fefffe 0%, #f9fffe 100%);
            position: relative;
            transition: padding-bottom 0.4s ease; /* For keyboard */
        }

        .chat-area-with-keyboard {
            padding-bottom: 280px; /* Adjust based on keyboard height */
        }
        
        .chat-area::-webkit-scrollbar {
            width: 8px;
        }
        
        .chat-area::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .chat-area::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #F9A825, #F57F17);
            border-radius: 4px;
        }
        
        .message {
            margin-bottom: 1.5rem;
            animation: messageSlideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1rem;
            line-height: 1.6;
        }
        
        @keyframes messageSlideIn {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .user-message, .bot-message {
            max-width: 85%;
            padding: 1rem 1.25rem;
        }

        .user-message {
            background: linear-gradient(135deg, #F9A825 0%, #F57F17 100%);
            color: white;
            margin-left: auto;
            border-radius: 1.5rem 1.5rem 0.5rem 1.5rem;
            box-shadow: 0 4px 16px rgba(249, 168, 37, 0.3);
        }
        
        .bot-message {
            background: white;
            color: #1f2937;
            border: 2px solid #e5e7eb;
            border-radius: 1.5rem 1.5rem 1.5rem 0.5rem;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            position: relative;
        }
        
        .bot-message::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #F9A825, #F57F17);
            border-radius: 3px 0 0 3px;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            background: white;
            border-radius: 1.5rem;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            width: fit-content;
            margin-bottom: 1.5rem;
            border: 2px solid #e5e7eb;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: linear-gradient(45deg, #F9A825, #F57F17);
            animation: typingBounce 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(2) { animation-delay: 0.16s; }
        .typing-dot:nth-child(3) { animation-delay: 0.32s; }
        
        @keyframes typingBounce {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        .input-area {
            background: #f8fffe;
            padding: 1rem 1rem;
            border-top: 2px solid #e5e7eb;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            position: relative;
            flex-shrink: 0;
        }
        
        .voice-btn, .send-btn, .keyboard-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
            flex-shrink: 0;
        }

        .keyboard-btn {
             background: linear-gradient(135deg, #60a5fa, #3b82f6);
             color: white;
        }

        .keyboard-btn.active {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }
        
        .voice-btn {
            background: linear-gradient(135deg, #fbbf24, #f97316);
            color: white;
        }
        
        .voice-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 24px rgba(251, 191, 36, 0.4);
        }
        
        .voice-btn.listening {
            animation: voicePulse 1.5s infinite;
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        @keyframes voicePulse {
            0%, 100% { transform: scale(1); box-shadow: 0 4px 16px rgba(239, 68, 68, 0.3); }
            50% { transform: scale(1.1); box-shadow: 0 8px 30px rgba(239, 68, 68, 0.5); }
        }
        
        .message-input {
            flex: 1;
            padding: 0.8rem 1.25rem;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 1.75rem;
            font-size: 16px; /* Prevents iOS zoom */
            transition: all 0.3s ease;
            outline: none;
            font-weight: 500;
        }
        
        .message-input:focus {
            border-color: #F9A825;
            box-shadow: 0 0 0 4px rgba(249, 168, 37, 0.1);
        }
        
        .send-btn {
            background: linear-gradient(135deg, #F9A825, #F57F17);
            color: white;
        }
        
        .send-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 24px rgba(249, 168, 37, 0.4);
        }
        
        .send-btn:active {
            transform: translateY(0) scale(0.95);
        }
        
        .help-section {
            background: linear-gradient(135deg, #ebf4ff, #dbeafe);
            border-radius: 1.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
            border: 2px solid #bfdbfe;
        }
        
        .help-title {
            color: #1e3a8a;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .help-list {
            color: #1e3a8a;
            font-weight: 500;
            line-height: 1.7;
        }

        .voice-tooltip {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .voice-tooltip.hidden {
            opacity: 0;
            transform: translateY(5px);
            pointer-events: none;
        }
        
        /* Focus indicators for keyboard navigation */
        *:focus {
            outline: 3px solid #F9A825;
            outline-offset: 2px;
        }
        
        .lang-btn:focus {
            outline-color: white;
        }

        /* Collapsible section styles */
        .collapsible {
            max-height: 500px;
            transition: max-height 0.5s ease-in-out, opacity 0.3s ease-in-out, padding 0.5s, margin 0.5s;
            overflow: hidden;
        }

        .collapsed {
            max-height: 0;
            opacity: 0;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
            margin-top: 0 !important;
            margin-bottom: 0 !important;
            border-width: 0 !important;
        }

        #header-toggle-icon.rotate-180 {
            transform: rotate(180deg);
        }

        /* --- Virtual Keyboard Styles --- */
        .keyboard-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #e5e7eb;
            z-index: 100;
            transform: translateY(100%);
            transition: transform 0.4s ease-in-out;
            padding: 0.5rem;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
        }

        .keyboard-container.visible {
            transform: translateY(0);
        }

        .simple-keyboard {
            border-radius: 0.5rem;
        }

        .simple-keyboard.hg-theme-default {
            background-color: transparent;
            border: none;
        }

        .simple-keyboard.hg-theme-default .hg-button {
            background: white;
            border-bottom: 2px solid #d1d5db;
            color: #1f2937;
            font-weight: 500;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: background 0.2s ease, transform 0.1s ease;
        }
        .simple-keyboard.hg-theme-default .hg-button:active {
            transform: scale(0.95);
        }

        .simple-keyboard.hg-theme-default .hg-button.hg-function {
            background: #d1d5db;
        }

        /* Responsive Design */
        @media (min-width: 640px) {
            body {
                padding: 1.5rem;
            }
            .chat-container {
                max-width: 42rem;
                height: 90vh;
                max-height: 850px;
                border-radius: 1.5rem;
                box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.3);
                border: 2px solid rgba(255, 255, 255, 0.2);
            }
            .input-area {
                padding: 1rem 1.5rem;
                gap: 1rem;
            }
            .voice-btn, .send-btn, .keyboard-btn {
                width: 52px;
                height: 52px;
            }
            .message-input {
                padding: 1rem 1.5rem;
            }
        }

        @media (min-width: 1024px) {
            .chat-container {
                max-width: 48rem;
            }
            .message-input {
                font-size: 1.1rem;
            }
        }
        
    </style>
</head>
<body>
    <div class="chat-container">
        <!-- Medical Disclaimer Banner -->
        <div class="disclaimer-banner" id="disclaimer-banner">
            <!-- Text will be inserted by script -->
        </div>

        <!-- Header -->
        <header class="header">
            <div class="logo-container">
                <div class="lang-selector">
                    <button class="lang-btn active" onclick="setLanguage('hi')" id="lang-hi">рд╣рд┐рдВрджреА</button>
                    <button class="lang-btn" onclick="setLanguage('en')" id="lang-en">English</button>
                    <button class="lang-btn" onclick="setLanguage('bn')" id="lang-bn">ржмрж╛ржВрж▓рж╛</button>
                    <button class="lang-btn" onclick="setLanguage('ta')" id="lang-ta">родрооро┐ро┤рпН</button>
                    <button class="lang-btn" onclick="setLanguage('od')" id="lang-od">рмУрмбрм╝рм┐рмЖ</button>
                    <button class="lang-btn" onclick="setLanguage('te')" id="lang-te">р░др▒Жр░▓р▒Бр░Чр▒Б</button>
                </div>
                <h1 id="main-title" class="text-2xl font-bold tracking-tight mb-1" style="font-family: 'Inter', sans-serif;"></h1>
                <p id="sub-title" class="text-base text-orange-100 font-semibold"></p>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div id="stat-free-value" class="text-2xl font-bold"></div>
                        <div id="stat-free-label" class="text-sm opacity-90"></div>
                    </div>
                    <div class="stat-card">
                        <div id="stat-247-value" class="text-2xl font-bold"></div>
                        <div id="stat-247-label" class="text-sm opacity-90"></div>
                    </div>
                </div>
            </div>
            
            <button id="header-toggle-btn" class="absolute bottom-[-1rem] bg-white text-gray-600 rounded-full p-1 shadow-md border-2 border-gray-200 transition-transform duration-300 z-10">
                <svg id="header-toggle-icon" class="w-6 h-6 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
            </button>
        </header>

        <!-- Disease Alert Section -->
        <div id="disease-alert" class="disease-alert collapsible">
            <div class="alert-header">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="width: 24px; height: 24px;">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <h3 id="disease-alert-title" class="font-bold"></h3>
            </div>
            <div id="disease-alert-content" class="alert-content">
                <!-- Content will be inserted by script -->
            </div>
            <button id="close-alert-btn" title="Dismiss Alert" class="alert-close-btn">&times;</button>
        </div>

        <!-- Quick Actions -->
        <div id="quick-actions" class="quick-actions collapsible">
            <button id="quick-btn-fever" class="quick-btn"></button>
            <button id="quick-btn-cough" class="quick-btn"></button>
            <button id="quick-btn-vaccine" class="quick-btn"></button>
            <button id="quick-btn-stomach" class="quick-btn"></button>
            <button id="quick-btn-diet" class="quick-btn"></button>
            <button id="quick-btn-mental-health" class="quick-btn mental-health"></button>
            <button id="quick-btn-women" class="quick-btn women"></button>
            <button id="quick-btn-emergency" class="quick-btn emergency"></button>
        </div>

        <!-- Chat Area -->
        <main id="chatArea" class="chat-area">
            <div id="initialMessageContainer">
                 <!-- content from script -->
            </div>
            
            <!-- Enhanced Typing Indicator -->
            <div id="typingIndicator" class="typing-indicator" style="display: none;">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <span id="typing-text" class="ml-2 text-base text-gray-700 font-semibold"></span>
            </div>
        </main>
        
        <!-- Enhanced Input Area -->
        <footer class="input-area">
            <!-- Voice Tooltip -->
            <div id="voice-tooltip" class="voice-tooltip hidden" style="position: absolute; bottom: 100%; left: 0; background: #1f2937; color: white; padding: 0.75rem 1rem; border-radius: 0.75rem; font-size: 0.8rem; white-space: nowrap; z-index: 30; transform: translateY(-10px); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);">
                <span id="tooltip-text"></span>
                <button id="close-tooltip" class="ml-2 font-bold text-lg">&times;</button>
            </div>
            
            <button id="keyboardBtn" class="keyboard-btn" title="Toggle Keyboard">
                 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                     <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                     <line x1="7" y1="7" x2="7" y2="7"></line><line x1="12" y1="7" x2="12" y2="7"></line><line x1="17" y1="7" x2="17" y2="7"></line>
                     <line x1="7" y1="12" x2="7" y2="12"></line><line x1="12" y1="12" x2="12" y2="12"></line><line x1="17" y1="12" x2="17" y2="12"></line>
                     <line x1="7" y1="17" x2="12" y2="17"></line>
                 </svg>
            </button>

            <!-- Voice Button -->
            <button id="voiceBtn" class="voice-btn" title="Voice Input">
                <svg id="mic-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 1C10.89 1 10 1.89 10 3V12C10 13.11 10.89 14 12 14C13.11 14 14 13.11 14 12V3C14 1.89 13.11 1 12 1Z" fill="currentColor"/>
                    <path d="M19 10V12C19 15.87 15.87 19 12 19C8.13 19 5 15.87 5 12V10H7V12C7 14.76 9.24 17 12 17C14.76 17 17 14.76 17 12V10H19Z" fill="currentColor"/>
                    <path d="M12 19V23H8V21H16V23H12V19Z" fill="currentColor"/>
                </svg>
            </button>
            
            <input type="text" id="messageInput" class="message-input">
            
            <button id="sendBtn" class="send-btn" title="Send Message">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2.01 21L23 12L2.01 3L2 10L17 12L2 14L2.01 21Z" fill="currentColor"/>
                </svg>
            </button>
        </footer>
    </div>
    
    <!-- Virtual Keyboard Container -->
    <div id="keyboard-container" class="keyboard-container">
        <div class="simple-keyboard"></div>
    </div>
    
    <script>
        // Sushruta - AI Health Assistant - Main JavaScript
        
        // --- IMPORTANT: For the app to work, you must replace this with your own Google AI API Key. ---
        // You can get a key from the Google AI Studio: https://makersuite.google.com/
        const apiKey = "AIzaSyDY4WUNKFyJmTDKZFCi0xZjLZvoMxsNTNo"; // If you want to use models other than gemini-2.5-flash-preview-05-20 or imagen-3.0-generate-002, provide an API key here. Otherwise, leave this as-is.
        
        const API_MODEL = "gemini-2.5-flash-preview-05-20";
        
        if (apiKey === "") {
            const errorElement = document.createElement('div');
            errorElement.style.cssText = 'position:fixed;top:0;left:0;width:100%;padding:1rem;background:red;color:white;text-align:center;font-weight:bold;z-index:1000;';
            errorElement.textContent = 'API Key is missing! Please add your API key to the script section in index.html to enable the assistant.';
            document.body.appendChild(errorElement);
        }

        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${API_MODEL}:generateContent?key=${apiKey}`;

        // --- DOM Elements ---
        const chatArea = document.getElementById('chatArea');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const voiceBtn = document.getElementById('voiceBtn');
        const keyboardBtn = document.getElementById('keyboardBtn');
        const keyboardContainer = document.getElementById('keyboard-container');
        const typingIndicator = document.getElementById('typingIndicator');
        const initialMessageContainer = document.getElementById('initialMessageContainer');
        const voiceTooltip = document.getElementById('voice-tooltip');
        const closeTooltipBtn = document.getElementById('close-tooltip');
        const headerToggleBtn = document.getElementById('header-toggle-btn');
        const headerToggleIcon = document.getElementById('header-toggle-icon');
        const quickActions = document.getElementById('quick-actions');
        
        let currentLanguage = 'hi'; // Default language

        // --- Comprehensive Translations Object (Bug with duplicates fixed) ---
        const translations = {
            en: {
                disclaimer: "тЪая╕П Important: This is for assistance only. Consult a doctor for serious issues.",
                mainTitle: "Sushruta",
                subTitle: "Your Health Assistant",
                statFreeValue: "FREE",
                statFreeLabel: "Service",
                stat247Value: "24/7",
                stat247Label: "Available",
                quickBtnFever: "Fever",
                quickBtnCough: "Cough",
                quickBtnVaccine: "Vaccine",
                quickBtnStomach: "Stomach",
                quickBtnDiet: "Diet Plan",
                quickBtnMentalHealth: "Mental Health",
                quickBtnWomen: "Women Health",
                quickBtnEmergency: "Emergency",
                queryFever: "What are the symptoms of a fever?",
                queryCough: "How to treat a cough?",
                queryVaccine: "About child vaccinations",
                queryStomach: "Home remedies for stomach ache",
                queryDiet: "General advice for a healthy diet",
                queryMentalHealth: "How to improve mental well-being?",
                queryWomen: "Common women's health issues",
                queryEmergency: "I need emergency help",
                helpTitle: "<span>ЁЯУЪ</span> How can I help you?",
                helpList: `тАв Know disease symptoms<br>тАв Get home remedies<br>тАв Learn about vaccination`,
                initialBotGreeting: "ЁЯЩП Hello! I'm Sushruta, your AI Health Assistant!",
                initialBotInstruction: "I can help with health issues. Use the buttons above or type your question.",
                typingText: "Sushruta is thinking...",
                inputPlaceholder: "Ask your question...",
                tooltipText: "ЁЯОд Tap mic to speak",
                emergencyResponse: `ЁЯЪи **This sounds serious. Please seek immediate medical help.**<br><br>Call the National Emergency Number: <b>112</b><br>Or call for an Ambulance: <b>108</b>`,
                diseaseAlertTitle: "Health Alerts for Your Area",
                diseaseAlertDengueTitle: "Dengue Fever Cases Rising",
                diseaseAlertDengueInfo: "Prevent mosquito breeding by keeping surroundings clean and avoiding water stagnation.",
                diseaseAlertViralTitle: "Seasonal Viral Fever",
                diseaseAlertViralInfo: "Boost immunity with a healthy diet and stay hydrated. Consult a doctor if fever persists."
            },
            hi: {
                disclaimer: "тЪая╕П рдорд╣рддреНрд╡рдкреВрд░реНрдг: рдпрд╣ рдХреЗрд╡рд▓ рд╕рд╣рд╛рдпрддрд╛ рдХреЗ рд▓рд┐рдП рд╣реИред рдЧрдВрднреАрд░ рд╕рдорд╕реНрдпрд╛ рдХреЗ рд▓рд┐рдП рдбреЙрдХреНрдЯрд░ рд╕реЗ рдорд┐рд▓реЗрдВред",
                mainTitle: "рд╕реБрд╢реНрд░реБрдд",
                subTitle: "рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕рд╣рд╛рдпрдХ",
                statFreeValue: "рдореБрдлреНрдд",
                statFreeLabel: "рд╕реЗрд╡рд╛",
                stat247Value: "24/7",
                stat247Label: "рдЙрдкрд▓рдмреНрдз",
                quickBtnFever: "рдмреБрдЦрд╛рд░",
                quickBtnCough: "рдЦрд╛рдВрд╕реА",
                quickBtnVaccine: "рдЯреАрдХрд╛",
                quickBtnStomach: "рдкреЗрдЯ рджрд░реНрдж",
                quickBtnDiet: "рдЖрд╣рд╛рд░ рдпреЛрдЬрдирд╛",
                quickBtnMentalHealth: "рдорд╛рдирд╕рд┐рдХ рд╕реНрд╡рд╛рд╕реНрдереНрдп",
                quickBtnWomen: "рдорд╣рд┐рд▓рд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп",
                quickBtnEmergency: "рдЖрдкрд╛рддрдХрд╛рд▓реАрди",
                queryFever: "рдмреБрдЦрд╛рд░ рдХреЗ рд▓рдХреНрд╖рдг рдХреНрдпрд╛ рд╣реИрдВ?",
                queryCough: "рдЦрд╛рдВрд╕реА рдХрд╛ рдЗрд▓рд╛рдЬ рдХреИрд╕реЗ рдХрд░реЗрдВ?",
                queryVaccine: "рдмрдЪреНрдЪреЛрдВ рдХрд╛ рдЯреАрдХрд╛рдХрд░рдг",
                queryStomach: "рдкреЗрдЯ рджрд░реНрдж рдХрд╛ рдШрд░реЗрд▓реВ рдЗрд▓рд╛рдЬ",
                queryDiet: "рд╕реНрд╡рд╕реНрде рдЖрд╣рд╛рд░ рдХреЗ рд▓рд┐рдП рд╕рд╛рдорд╛рдиреНрдп рд╕рд▓рд╛рд╣",
                queryMentalHealth: "рдорд╛рдирд╕рд┐рдХ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХреИрд╕реЗ рд╕реБрдзрд╛рд░реЗрдВ?",
                queryWomen: "рдорд╣рд┐рд▓рд╛рдУрдВ рдХреА рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕рдорд╕реНрдпрд╛",
                queryEmergency: "рдЖрдкрд╛рддрдХрд╛рд▓реАрди рдорджрдж рдЪрд╛рд╣рд┐рдП",
                helpTitle: "<span>ЁЯУЪ</span> рдореИрдВ рдЖрдкрдХреА рдХреИрд╕реЗ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ?",
                helpList: `тАв рдмреАрдорд╛рд░реА рдХреЗ рд▓рдХреНрд╖рдг рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП<br>тАв рдШрд░реЗрд▓реВ рдЙрдкрдЪрд╛рд░ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП<br>тАв рдЯреАрдХрд╛рдХрд░рдг рдХреА рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП`,
                initialBotGreeting: "ЁЯЩП рдирдорд╕реНрддреЗ! рдореИрдВ рд╕реБрд╢реНрд░реБрдд рд╣реВрдВ, рдЖрдкрдХрд╛ AI рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕рд╣рд╛рдпрдХ!",
                initialBotInstruction: "рдореИрдВ рдЖрдкрдХреА рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕рдВрдмрдВрдзреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВред рдКрдкрд░ рдХреЗ рдмрдЯрди рджрдмрд╛рдПрдВ рдпрд╛ рдЕрдкрдирд╛ рд╕рд╡рд╛рд▓ рдЯрд╛рдЗрдк рдХрд░реЗрдВред",
                typingText: "рд╕реБрд╢реНрд░реБрдд рд╕реЛрдЪ рд░рд╣рд╛ рд╣реИ...",
                inputPlaceholder: "рдЕрдкрдирд╛ рд╕рд╡рд╛рд▓ рдкреВрдЫреЗрдВ...",
                tooltipText: "ЁЯОд рдорд╛рдЗрдХ рджрдмрд╛рдХрд░ рдмреЛрд▓реЗрдВ",
                emergencyResponse: `ЁЯЪи **рдпрд╣ рдЧрдВрднреАрд░ рд▓рдЧ рд░рд╣рд╛ рд╣реИред рдХреГрдкрдпрд╛ рддрддреНрдХрд╛рд▓ рдЪрд┐рдХрд┐рддреНрд╕рд╛ рд╕рд╣рд╛рдпрддрд╛ рд▓реЗрдВред**<br><br>рд░рд╛рд╖реНрдЯреНрд░реАрдп рдЖрдкрд╛рддрдХрд╛рд▓реАрди рдирдВрдмрд░ рдкрд░ рдХреЙрд▓ рдХрд░реЗрдВ: <b>112</b><br>рдпрд╛ рдПрдореНрдмреБрд▓реЗрдВрд╕ рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдХрд░реЗрдВ: <b>108</b>`,
                diseaseAlertTitle: "рдЖрдкрдХреЗ рдХреНрд╖реЗрддреНрд░ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЕрд▓рд░реНрдЯ",
                diseaseAlertDengueTitle: "рдбреЗрдВрдЧреВ рдмреБрдЦрд╛рд░ рдХреЗ рдорд╛рдорд▓реЗ рдмрдврд╝ рд░рд╣реЗ рд╣реИрдВ",
                diseaseAlertDengueInfo: "рдЖрд╕-рдкрд╛рд╕ рд╕рд╛рдл-рд╕рдлрд╛рдИ рд░рдЦрдХрд░ рдФрд░ рдкрд╛рдиреА рдЬрдорд╛ рд╣реЛрдиреЗ рд╕реЗ рд░реЛрдХрдХрд░ рдордЪреНрдЫрд░реЛрдВ рдХреЗ рдкреНрд░рдЬрдирди рдХреЛ рд░реЛрдХреЗрдВред",
                diseaseAlertViralTitle: "рдореМрд╕рдореА рд╡рд╛рдпрд░рд▓ рдмреБрдЦрд╛рд░",
                diseaseAlertViralInfo: "рд╕реНрд╡рд╕реНрде рдЖрд╣рд╛рд░ рд╕реЗ рд░реЛрдЧ рдкреНрд░рддрд┐рд░реЛрдзрдХ рдХреНрд╖рдорддрд╛ рдмрдврд╝рд╛рдПрдВ рдФрд░ рд╣рд╛рдЗрдбреНрд░реЗрдЯреЗрдб рд░рд╣реЗрдВред рдмреБрдЦрд╛рд░ рдмрдирд╛ рд░рд╣рдиреЗ рдкрд░ рдбреЙрдХреНрдЯрд░ рд╕реЗ рд╕рд▓рд╛рд╣ рд▓реЗрдВред"
            },
            bn: {
                disclaimer: "тЪая╕П ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг: ржПржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ рж╕рж╣рж╛ржпрж╝рждрж╛рж░ ржЬржирзНржпред ржЧрзБрж░рзБрждрж░ рж╕ржорж╕рзНржпрж╛рж░ ржЬржирзНржп ржбрж╛ржХрзНрждрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржкрж░рж╛ржорж░рзНрж╢ ржХрж░рзБржиред",
                mainTitle: "рж╕рзБрж╢рзНрж░рзБржд",
                subTitle: "ржЖржкржирж╛рж░ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рж╣ржХрж╛рж░рзА",
                statFreeValue: "ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ",
                statFreeLabel: "ржкрж░рж┐рж╖рзЗржмрж╛",
                stat247Value: "рзирзк/рзн",
                stat247Label: "ржЙржкрж▓ржмрзНржз",
                quickBtnFever: "ржЬрзНржмрж░",
                quickBtnCough: "ржХрж╛рж╢рж┐",
                quickBtnVaccine: "ржЯрж┐ржХрж╛",
                quickBtnStomach: "ржкрзЗржЯ ржмрзНржпржерж╛",
                quickBtnDiet: "ржбрж╛ржпрж╝рзЗржЯ ржкрзНрж▓рзНржпрж╛ржи",
                quickBtnMentalHealth: "ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп",
                quickBtnWomen: "ржорж╣рж┐рж▓рж╛ржжрзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп",
                quickBtnEmergency: "ржЬрж░рзБрж░рзА",
                queryFever: "ржЬрзНржмрж░рзЗрж░ рж▓ржХрзНрж╖ржг ржХрж┐?",
                queryCough: "ржХрж╛рж╢рж┐рж░ ржЪрж┐ржХрж┐рзОрж╕рж╛ ржХрж┐ржнрж╛ржмрзЗ ржХрж░ржмрзЗржи?",
                queryVaccine: "рж╢рж┐рж╢рзБржжрзЗрж░ ржЯрж┐ржХрж╛ рж╕ржорзНржкрж░рзНржХрзЗ",
                queryStomach: "ржкрзЗржЯ ржмрзНржпржерж╛рж░ ржШрж░рзЛржпрж╝рж╛ ржкрзНрж░рждрж┐ржХрж╛рж░",
                queryDiet: "рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржЦрж╛ржмрж╛рж░рзЗрж░ ржЬржирзНржп рж╕рж╛ржзрж╛рж░ржг ржкрж░рж╛ржорж░рзНрж╢",
                queryMentalHealth: "ржорж╛ржирж╕рж┐ржХ рж╕рзБрж╕рзНржерждрж╛ ржХрзАржнрж╛ржмрзЗ ржЙржирзНржиржд ржХрж░рж╛ ржпрж╛ржпрж╝?",
                queryWomen: "ржорж╣рж┐рж▓рж╛ржжрзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕ржорж╕рзНржпрж╛",
                queryEmergency: "ржЬрж░рзБрж░рзА рж╕рж╛рж╣рж╛ржпрзНржп ржкрзНрж░ржпрж╝рзЛржЬржи",
                helpTitle: "<span>ЁЯУЪ</span> ржЖржорж┐ ржХрж┐ржнрж╛ржмрзЗ ржЖржкржирж╛ржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐?",
                helpList: `тАв рж░рзЛржЧрзЗрж░ рж▓ржХрзНрж╖ржг ржЬрж╛ржирзБржи<br>тАв ржШрж░рзЛржпрж╝рж╛ ржкрзНрж░рждрж┐ржХрж╛рж░ ржкрж╛ржи<br>тАв ржЯрж┐ржХрж╛ рж╕ржорзНржкрж░рзНржХрзЗ ржЬрж╛ржирзБржи`,
                initialBotGreeting: "ЁЯЩП ржиржорж╕рзНржХрж╛рж░! ржЖржорж┐ рж╕рзБрж╢рзНрж░рзБржд, ржЖржкржирж╛рж░ ржПржЖржЗ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рж╣ржХрж╛рж░рзА!",
                initialBotInstruction: "ржЖржорж┐ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕ржорж╕рзНржпрж╛ржпрж╝ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐ред ржЙржкрж░рзЗрж░ ржмрзЛрждрж╛ржоржЧрзБрж▓рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи ржмрж╛ ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржи ржЯрж╛ржЗржк ржХрж░рзБржиред",
                typingText: "рж╕рзБрж╢рзНрж░рзБржд ржнрж╛ржмржЫрзЗ...",
                inputPlaceholder: "ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржи ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржХрж░рзБржи...",
                tooltipText: "ЁЯОд ржХржерж╛ ржмрж▓рждрзЗ ржорж╛ржЗржХ ржЯрзНржпрж╛ржк ржХрж░рзБржи",
                emergencyResponse: `ЁЯЪи **ржПржЯрж┐ ржЧрзБрж░рзБрждрж░ ржоржирзЗ рж╣ржЪрзНржЫрзЗред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЕржмрж┐рж▓ржорзНржмрзЗ ржЪрж┐ржХрж┐рзОрж╕рж╛ рж╕рж╣рж╛ржпрж╝рждрж╛ ржирж┐ржиред**<br><br>ржЬрж╛рждрзАржпрж╝ ржЬрж░рзБрж░рж┐ ржиржорзНржмрж░ ржП ржХрж▓ ржХрж░рзБржи: <b>112</b><br>ржЕржержмрж╛ ржЕрзНржпрж╛ржорзНржмрзБрж▓рзЗржирзНрж╕рзЗрж░ ржЬржирзНржп ржХрж▓ ржХрж░рзБржи: <b>108</b>`,
                diseaseAlertTitle: "ржЖржкржирж╛рж░ ржПрж▓рж╛ржХрж╛рж░ ржЬржирзНржп рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рждрж░рзНржХрждрж╛",
                diseaseAlertDengueTitle: "ржбрзЗржЩрзНржЧрзБ ржЬрзНржмрж░рзЗрж░ ржШржЯржирж╛ ржмрж╛ржбрж╝ржЫрзЗ",
                diseaseAlertDengueInfo: "ржкрж░рж┐ржмрзЗрж╢ ржкрж░рж┐рж╖рзНржХрж╛рж░ рж░рзЗржЦрзЗ ржПржмржВ ржЬрж▓ ржЬржорждрзЗ ржирж╛ ржжрж┐ржпрж╝рзЗ ржорж╢рж╛рж░ ржмржВрж╢ржмрзГржжрзНржзрж┐ рж░рзЛржз ржХрж░рзБржиред",
                diseaseAlertViralTitle: "ржорзМрж╕рзБржорзА ржнрж╛ржЗрж░рж╛рж▓ ржЬрзНржмрж░",
                diseaseAlertViralInfo: "рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржЦрж╛ржмрж╛рж░рзЗрж░ ржорж╛ржзрзНржпржорзЗ рж░рзЛржЧ ржкрзНрж░рждрж┐рж░рзЛржз ржХрзНрж╖ржорждрж╛ ржмрж╛ржбрж╝рж╛ржи ржПржмржВ рж╣рж╛ржЗржбрзНрж░рзЗржЯрзЗржб ржерж╛ржХрзБржиред ржЬрзНржмрж░ ржерж╛ржХрж▓рзЗ ржбрж╛ржХрзНрждрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржкрж░рж╛ржорж░рзНрж╢ ржХрж░рзБржиред"
            },
            ta: {
                disclaimer: "тЪая╕П роорпБроХрпНроХро┐ропроорпН: роЗродрпБ роЙродро╡ро┐роХрпНроХрпБ роороЯрпНроЯрпБроорпЗ. ржЧрзБрж░рзБрждрж░ рокро┐ро░роЪрпНроЪро┐ройрпИроХро│рпБроХрпНроХрпБ рооро░рпБродрпНродрпБро╡ро░рпИ роЕрогрпБроХро╡рпБроорпН.",
                mainTitle: "роЪрпБро╖рпНро░рпБродро╛",
                subTitle: "роЙроЩрпНроХро│рпН роЪрпБроХро╛родро╛ро░ роЙродро╡ро┐ропро╛ро│ро░рпН",
                statFreeValue: "роЗро▓ро╡роЪроорпН",
                statFreeLabel: "роЪрпЗро╡рпИ",
                stat247Value: "24/7",
                stat247Label: "роХро┐роЯрпИроХрпНроХрпБроорпН",
                quickBtnFever: "роХро╛ропрпНроЪрпНроЪро▓рпН",
                quickBtnCough: "роЗро░рпБрооро▓рпН",
                quickBtnVaccine: "родроЯрпБрокрпНрокрпВроЪро┐",
                quickBtnStomach: "ро╡ропро┐ро▒рпНро▒рпБ ро╡ро▓ро┐",
                quickBtnDiet: "роЙрогро╡рпБ родро┐роЯрпНроЯроорпН",
                quickBtnMentalHealth: "рооройроиро▓роорпН",
                quickBtnWomen: "рокрпЖрогрпНроХро│рпН роиро▓роорпН",
                quickBtnEmergency: "роЕро╡роЪро░роорпН",
                queryFever: "роХро╛ропрпНроЪрпНроЪро▓ро┐ройрпН роЕро▒ро┐роХрпБро▒ро┐роХро│рпН роОройрпНрой?",
                queryCough: "роЗро░рпБрооро▓рпН роХрпБрогрокрпНрокроЯрпБродрпНродрпБро╡родрпБ роОрокрпНрокроЯро┐?",
                queryVaccine: "роХрпБро┤роирпНродрпИ родроЯрпБрокрпНрокрпВроЪро┐роХро│рпН рокро▒рпНро▒ро┐",
                queryStomach: "ро╡ропро┐ро▒рпНро▒рпБ ро╡ро▓ро┐роХрпНроХро╛рой ро╡рпАроЯрпНроЯрпБ ро╡рпИродрпНродро┐ропроорпН",
                queryDiet: "роЖро░рпЛроХрпНроХро┐ропрооро╛рой роЙрогро╡рпБроХрпНроХро╛рой рокрпКродрпБро╡ро╛рой роЖро▓рпЛроЪройрпИ",
                queryMentalHealth: "роорой роиро▓родрпНродрпИ роОро╡рпНро╡ро╛ро▒рпБ роорпЗроорпНрокроЯрпБродрпНродрпБро╡родрпБ?",
                queryWomen: "рокрпЖрогрпНроХро│ро┐ройрпН роЪрпБроХро╛родро╛ро░ рокро┐ро░роЪрпНроЪро┐ройрпИроХро│рпН",
                queryEmergency: "роОройроХрпНроХрпБ роЕро╡роЪро░ роЙродро╡ро┐ родрпЗро╡рпИ",
                helpTitle: "<span>ЁЯУЪ</span> роиро╛ройрпН роЙроЩрпНроХро│рпБроХрпНроХрпБ роОрокрпНрокроЯро┐ роЙродро╡ роорпБроЯро┐ропрпБроорпН?",
                helpList: `тАв роирпЛропрпН роЕро▒ро┐роХрпБро▒ро┐роХро│рпИ роЕро▒ро┐ропрпБроЩрпНроХро│рпН<br>тАв ро╡рпАроЯрпНроЯрпБ ро╡рпИродрпНродро┐ропроорпН рокрпЖро▒рпБроЩрпНроХро│рпН<br>тАв родроЯрпБрокрпНрокрпВроЪро┐ рокро▒рпНро▒ро┐ роЕро▒ро┐ропрпБроЩрпНроХро│рпН`,
                initialBotGreeting: "ЁЯЩП ро╡рогроХрпНроХроорпН! роиро╛ройрпН роЪрпБро╖рпНро░рпБродро╛, роЙроЩрпНроХро│рпН AI роЪрпБроХро╛родро╛ро░ роЙродро╡ро┐ропро╛ро│ро░рпН!",
                initialBotInstruction: "роЪрпБроХро╛родро╛ро░ рокро┐ро░роЪрпНроЪро┐ройрпИроХро│рпБроХрпНроХрпБ роиро╛ройрпН роЙродро╡ роорпБроЯро┐ропрпБроорпНред роорпЗро▓рпЗ роЙро│рпНро│ рокрпКродрпНродро╛ройрпНроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН роЕро▓рпНро▓родрпБ роЙроЩрпНроХро│рпН роХрпЗро│рпНро╡ро┐ропрпИ родроЯрпНроЯроЪрпНроЪрпБ роЪрпЖропрпНропро╡рпБроорпНред",
                typingText: "роЪрпБро╖рпНро░рпБродро╛ ропрпЛроЪро┐роХрпНроХро┐ро▒родрпБ...",
                inputPlaceholder: "роЙроЩрпНроХро│рпН роХрпЗро│рпНро╡ро┐ропрпИроХрпН роХрпЗро│рпБроЩрпНроХро│рпН...",
                tooltipText: "ЁЯОд рокрпЗроЪ роорпИроХрпНроХрпИродрпН родроЯрпНроЯро╡рпБроорпН",
                emergencyResponse: `ЁЯЪи **роЗродрпБ родрпАро╡ро┐ро░рооро╛роХродрпН родрпЖро░ро┐роХро┐ро▒родрпБ. роЙроЯройроЯро┐ропро╛роХ рооро░рпБродрпНродрпБро╡ роЙродро╡ро┐ропрпИ роиро╛роЯрпБроЩрпНроХро│рпН.**<br><br>родрпЗроЪро┐роп роЕро╡роЪро░ роОрогрпНрогрпИ роЕро┤рпИроХрпНроХро╡рпБроорпН: <b>112</b><br>роЕро▓рпНро▓родрпБ роЖроорпНрокрпБро▓ройрпНро╕рпИ роЕро┤рпИроХрпНроХро╡рпБроорпН: <b>108</b>`,
                diseaseAlertTitle: "роЙроЩрпНроХро│рпН рокроХрпБродро┐роХрпНроХро╛рой роЪрпБроХро╛родро╛ро░ роОроЪрпНроЪро░ро┐роХрпНроХрпИроХро│рпН",
                diseaseAlertDengueTitle: "роЯрпЖроЩрпНроХрпБ роХро╛ропрпНроЪрпНроЪро▓рпН р▓кр│Нр▓░р▓Хр▓░р▓гроЩрпНроХро│рпН роЕродро┐роХро░ро┐родрпНродрпБ ро╡ро░рпБроХро┐ройрпНро▒рой",
                diseaseAlertDengueInfo: "роЪрпБро▒рпНро▒рпБрокрпНрокрпБро▒родрпНродрпИ роЪрпБродрпНродрооро╛роХ ро╡рпИродрпНродро┐ро░рпБрокрпНрокродройрпН роорпВро▓роорпБроорпН, родрогрпНрогрпАро░рпН родрпЗроЩрпНроХрпБро╡родрпИродрпН родро╡ро┐ро░рпНрокрпНрокродройрпН роорпВро▓роорпБроорпН роХрпКроЪрпБроХрпНроХро│рпН рокрпЖро░рпБроХрпБро╡родрпИродрпН родроЯрпБроХрпНроХро╡рпБроорпН.",
                diseaseAlertViralTitle: "рокро░рпБро╡роХро╛ро▓ ро╡рпИро░ро╕рпН роХро╛ропрпНроЪрпНроЪро▓рпН",
                diseaseAlertViralInfo: "роЖро░рпЛроХрпНроХро┐ропрооро╛рой роЙрогро╡рпБ роорпВро▓роорпН роирпЛропрпН роОродро┐ро░рпНрокрпНрокрпБ роЪроХрпНродро┐ропрпИ роЕродро┐роХро░ро┐родрпНродрпБ, роирпАро░рпЗро▒рпНро▒родрпНродрпБроЯройрпН роЗро░рпБроЩрпНроХро│рпН. роХро╛ропрпНроЪрпНроЪро▓рпН родрпКроЯро░рпНроирпНродро╛ро▓рпН рооро░рпБродрпНродрпБро╡ро░рпИ роЕрогрпБроХро╡рпБроорпН."
            },
            od: {
                disclaimer: "тЪая╕П рмЧрнБрм░рнБрмдрнНрн▒рмкрнВрм░рнНрмгрнНрмг: рмПрм╣рм╛ рмХрнЗрммрм│ рм╕рм╣рм╛рнЯрмдрм╛ рмкрм╛рмЗрмБред рмЧрморнНрмнрнАрм░ рм╕рморм╕рнНрнЯрм╛ рмкрм╛рмЗрмБ рмбрм╛рмХрнНрмдрм░рмЩрнНрмХ рм╕рм╣рм┐рмд рмкрм░рм╛рморм░рнНрм╢ рмХрм░рмирнНрмдрнБред",
                mainTitle: "рм╕рнБрм╢рнНрм░рнБрмд",
                subTitle: "рмЖрмкрмгрмЩрнНрмХ рм╕рнНрн▒рм╛рм╕рнНрмернНрнЯ рм╕рм╣рм╛рнЯрмХ",
                statFreeValue: "рморм╛рмЧрмгрм╛",
                statFreeLabel: "рм╕рнЗрммрм╛",
                stat247Value: "рнирнк/рнн",
                stat247Label: "рмЙрмкрм▓рммрнНрмз",
                quickBtnFever: "рмЬрнНрн▒рм░",
                quickBtnCough: "рмХрм╛рм╢",
                quickBtnVaccine: "рмЯрм┐рмХрм╛",
                quickBtnStomach: "рмкрнЗрмЯ рммрнНрнЯрмерм╛",
                quickBtnDiet: "рмбрм╛рмПрмЯрнН рмкрнНрм▓рм╛рмирнН",
                quickBtnMentalHealth: "рморм╛рмирм╕рм┐рмХ рм╕рнНрн▒рм╛рм╕рнНрмернНрнЯ",
                quickBtnWomen: "рморм╣рм┐рм│рм╛ рм╕рнНрн▒рм╛рм╕рнНрмернНрнЯ",
                quickBtnEmergency: "рмЬрм░рнБрм░рнАрмХрм╛рм│рнАрми",
                queryFever: "рмЬрнНрн▒рм░рм░ рм▓рмХрнНрм╖рмг рмХ'рмг?",
                queryCough: "рмХрм╛рм╢рм░ рмЪрм┐рмХрм┐рмдрнНрм╕рм╛ рмХрм┐рмкрм░рм┐ рмХрм░рм┐рммрнЗ?",
                queryVaccine: "рм╢рм┐рм╢рнБ рмЯрнАрмХрм╛рмХрм░рмг рммрм┐рм╖рнЯрм░рнЗ",
                queryStomach: "рмкрнЗрмЯ рммрнНрнЯрмерм╛ рмкрм╛рмЗрмБ рмШрм░рнЛрмЗ рмЙрмкрмЪрм╛рм░",
                queryDiet: "рмПрмХ рм╕рнБрм╕рнНрме рмЦрм╛рмжрнНрнЯ рмкрм╛рмЗрмБ рм╕рм╛рмзрм╛рм░рмг рмкрм░рм╛рморм░рнНрм╢",
                queryMentalHealth: "рморм╛рмирм╕рм┐рмХ рм╕рнБрм╕рнНрмермдрм╛ рмХрм┐рмкрм░рм┐ рмЙрмирнНрмирмд рмХрм░рм┐рммрнЗ?",
                queryWomen: "рморм╣рм┐рм│рм╛рмЩрнНрмХ рм╕рнНрн▒рм╛рм╕рнНрмернНрнЯ рм╕рморм╕рнНрнЯрм╛",
                queryEmergency: "рморнЛрмдрнЗ рмЬрм░рнБрм░рнАрмХрм╛рм│рнАрми рм╕рм╛рм╣рм╛рмпрнНрнЯ рмжрм░рмХрм╛рм░",
                helpTitle: "<span>ЁЯУЪ</span> рморнБрмБ рмЖрмкрмгрмЩрнНрмХрнБ рмХрм┐рмкрм░рм┐ рм╕рм╛рм╣рм╛рмпрнНрнЯ рмХрм░рм┐рмкрм╛рм░рнЗ?",
                helpList: `тАв рм░рнЛрмЧрм░ рм▓рмХрнНрм╖рмг рмЬрм╛рмгрмирнНрмдрнБ<br>тАв рмШрм░рнЛрмЗ рмЙрмкрмЪрм╛рм░ рмкрм╛рмЖрмирнНрмдрнБ<br>тАв рмЯрнАрмХрм╛рмХрм░рмг рммрм┐рм╖рнЯрм░рнЗ рмЬрм╛рмгрмирнНрмдрнБ`,
                initialBotGreeting: "ЁЯЩП рмирморм╕рнНрмХрм╛рм░! рморнБрмБ рм╕рнБрм╢рнНрм░рнБрмд, рмЖрмкрмгрмЩрнНрмХ AI рм╕рнНрн▒рм╛рм╕рнНрмернНрнЯ рм╕рм╣рм╛рнЯрмХ!",
                initialBotInstruction: "рморнБрмБ рм╕рнНрн▒рм╛рм╕рнНрмернНрнЯ рм╕рморм╕рнНрнЯрм╛рм░рнЗ рм╕рм╛рм╣рм╛рмпрнНрнЯ рмХрм░рм┐рмкрм╛рм░рм┐рммрм┐ред рмЙрмкрм░ рммрмЯрмирнН рммрнНрнЯрммрм╣рм╛рм░ рмХрм░рмирнНрмдрнБ рмХрм┐рморнНрммрм╛ рмЖрмкрмгрмЩрнНрмХ рмкрнНрм░рм╢рнНрми рмЯрм╛рмЗрмкрнН рмХрм░рмирнНрмдрнБред",
                typingText: "рм╕рнБрм╢рнНрм░рнБрмд рмнрм╛рммрнБрмЫрм┐...",
                inputPlaceholder: "рмЖрмкрмгрмЩрнНрмХ рмкрнНрм░рм╢рнНрми рмкрмЪрм╛рм░рмирнНрмдрнБ...",
                tooltipText: "ЁЯОд рмХрм╣рм┐рммрм╛ рмкрм╛рмЗрмБ рморм╛рмЗрмХрнН рмЯрнНрнЯрм╛рмкрнН рмХрм░рмирнНрмдрнБ",
                emergencyResponse: `ЁЯЪи **рмПрм╣рм╛ рмЧрморнНрмнрнАрм░ рмормирнЗрм╣рнЗрмЙрмЫрм┐ред рмжрнЯрм╛рмХрм░рм┐ рмдрнБрм░рмирнНрмд рмбрм╛рмХрнНрмдрм░рнА рм╕рм╛рм╣рм╛рмпрнНрнЯ рмирм┐рмЕрмирнНрмдрнБред**<br><br>рмЬрм╛рмдрнАрнЯ рмЬрм░рнБрм░рнАрмХрм╛рм│рнАрми рмирморнНрммрм░рмХрнБ рмХрм▓рнН рмХрм░рмирнНрмдрнБ: <b>112</b><br>рмХрм┐рморнНрммрм╛ рмЖрморнНрммрнБрм▓рм╛рмирнНрм╕ рмкрм╛рмЗрмБ рмХрм▓рнН рмХрм░рмирнНрмдрнБ: <b>108</b>`,
                diseaseAlertTitle: "рмЖрмкрмгрмЩрнНрмХ рмЕрмЮрнНрмЪрм│ рмкрм╛рмЗрмБ рм╕рнНрн▒рм╛рм╕рнНрмернНрнЯ рм╕рмдрм░рнНрмХрмдрм╛",
                diseaseAlertDengueTitle: "рмбрнЗрмЩрнНрмЧрнБ рмЬрнНрн▒рм░ рморм╛рморм▓рм╛ рммрмврнБрмЫрм┐",
                diseaseAlertDengueInfo: "рмкрм░рм┐рммрнЗрм╢рмХрнБ рм╕рмлрм╛ рм░рмЦрм┐ рмПрммрмВ рмкрм╛рмгрм┐ рмЬрморм┐рммрм╛рмХрнБ рми рмжрнЗрмЗ рморм╢рм╛рмЩрнНрмХ рммрмВрм╢рммрнГрмжрнНрмзрм┐рмХрнБ рм░рнЛрмХрмирнНрмдрнБред",
                diseaseAlertViralTitle: "рмЛрмдрнБрмХрм╛рм│рнАрми рмнрм╛рмЗрм░рм╛рм▓рнН рмЬрнНрн▒рм░",
                diseaseAlertViralInfo: "рмПрмХ рм╕рнБрм╕рнНрме рмЦрм╛рмжрнНрнЯ рм╕рм╣рм┐рмд рм░рнЛрмЧ рмкрнНрм░рмдрм┐рм░рнЛрмзрмХ рм╢рмХрнНрмдрм┐ рммрмврм╛рмирнНрмдрнБ рмПрммрмВ рм╣рм╛рмЗрмбрнНрм░рнЗрмЯрнЗрмбрнН рм░рнБрм╣рмирнНрмдрнБред рмпрмжрм┐ рмЬрнНрн▒рм░ рм▓рм╛рмЧрм┐рм░рм╣рнЗ рмдрнЗрммрнЗ рмбрм╛рмХрнНрмдрм░рмЩрнНрмХ рм╕рм╣рм┐рмд рмкрм░рм╛рморм░рнНрм╢ рмХрм░рмирнНрмдрнБред"
            },
            te: {
                disclaimer: "тЪая╕П р░ор▒Бр░Цр▒Нр░п р░Чр░ор░ир░┐р░Х: р░Зр░жр░┐ р░╕р░╣р░╛р░пр░В р░Хр▒Лр░╕р░В р░ор░╛р░др▒Нр░░р░ор▒З. р░др▒Ар░╡р▒Нр░░р░ор▒Ир░и р░╕р░ор░╕р▒Нр░пр░▓ р░Хр▒Лр░╕р░В р░╡р▒Ир░жр▒Нр░пр▒Бр░бр░┐р░ир░┐ р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐.",
                mainTitle: "р░╕р▒Бр░╢р▒Нр░░р▒Бр░д",
                subTitle: "р░ор▒А р░Жр░░р▒Лр░Чр▒Нр░п р░╕р░╣р░╛р░пр░Хр▒Бр░бр▒Б",
                statFreeValue: "р░Йр░Ър░┐р░др░В",
                statFreeLabel: "р░╕р▒Зр░╡",
                stat247Value: "24/7",
                stat247Label: "р░Ер░Вр░жр▒Бр░мр░╛р░Яр▒Бр░▓р▒Л р░Йр░Вр░жр░┐",
                quickBtnFever: "р░Ьр▒Нр░╡р░░р░В",
                quickBtnCough: "р░жр░Чр▒Нр░Чр▒Б",
                quickBtnVaccine: "р░Яр▒Ар░Хр░╛",
                quickBtnStomach: "р░Хр░бр▒Бр░кр▒Б р░ир▒Кр░кр▒Нр░кр░┐",
                quickBtnDiet: "р░Жр░╣р░╛р░░ р░кр▒Нр░░р░гр░╛р░│р░┐р░Х",
                quickBtnMentalHealth: "р░ор░╛р░ир░╕р░┐р░Х р░Жр░░р▒Лр░Чр▒Нр░пр░В",
                quickBtnWomen: "р░ор░╣р░┐р░│р░▓ р░Жр░░р▒Лр░Чр▒Нр░пр░В",
                quickBtnEmergency: "р░Ер░др▒Нр░пр░╡р░╕р░░р░В",
                queryFever: "р░Ьр▒Нр░╡р░░р░В р░пр▒Кр░Хр▒Нр░Х р░▓р░Хр▒Нр░╖р░гр░╛р░▓р▒Б р░Пр░ор░┐р░Яр░┐?",
                queryCough: "р░жр░Чр▒Нр░Чр▒Бр░ир▒Б р░Ор░▓р░╛ р░др░Чр▒Нр░Чр░┐р░Вр░Ър░╛р░▓р░┐?",
                queryVaccine: "р░кр░┐р░▓р▒Нр░▓р░▓ р░Яр▒Ар░Хр░╛р░▓ р░Чр▒Бр░░р░┐р░Вр░Ър░┐",
                queryStomach: "р░Хр░бр▒Бр░кр▒Б р░ир▒Кр░кр▒Нр░кр░┐р░Хр░┐ р░Зр░Вр░Яр░┐ р░ир░┐р░╡р░╛р░░р░гр░▓р▒Б",
                queryDiet: "р░Жр░░р▒Лр░Чр▒Нр░пр░Хр░░р░ор▒Ир░и р░Жр░╣р░╛р░░р░В р░Хр▒Лр░╕р░В р░╕р░╛р░зр░╛р░░р░г р░╕р░▓р░╣р░╛",
                queryMentalHealth: "р░ор░╛р░ир░╕р░┐р░Х р░Хр▒Нр░╖р▒Зр░ор░╛р░ир▒Нр░ир░┐ р░Ор░▓р░╛ р░ор▒Жр░░р▒Бр░Чр▒Бр░кр░░р░Ър▒Бр░Хр▒Лр░╡р░╛р░▓р░┐?",
                queryWomen: "р░ор░╣р░┐р░│р░▓ р░╕р░╛р░зр░╛р░░р░г р░Жр░░р▒Лр░Чр▒Нр░п р░╕р░ор░╕р▒Нр░пр░▓р▒Б",
                queryEmergency: "р░ир░╛р░Хр▒Б р░Ер░др▒Нр░пр░╡р░╕р░░ р░╕р░╣р░╛р░пр░В р░Хр░╛р░╡р░╛р░▓р░┐",
                helpTitle: "<span>ЁЯУЪ</span> р░ир▒Зр░ир▒Б р░ор▒Ар░Хр▒Б р░Ор░▓р░╛ р░╕р░╣р░╛р░пр░кр░бр░Чр░▓р░ир▒Б?",
                helpList: `тАв р░╡р▒Нр░пр░╛р░зр░┐ р░▓р░Хр▒Нр░╖р░гр░╛р░▓р░ир▒Б р░др▒Жр░▓р▒Бр░╕р▒Бр░Хр▒Лр░Вр░бр░┐<br>тАв р░Зр░Вр░Яр░┐ р░ир░┐р░╡р░╛р░░р░гр░▓р░ир▒Б р░кр▒Кр░Вр░жр░Вр░бр░┐<br>тАв р░Яр▒Ар░Хр░╛р░▓ р░Чр▒Бр░░р░┐р░Вр░Ър░┐ р░др▒Жр░▓р▒Бр░╕р▒Бр░Хр▒Лр░Вр░бр░┐`,
                initialBotGreeting: "ЁЯЩП р░ир░ор░╕р▒Нр░Хр░╛р░░р░В! р░ир▒Зр░ир▒Б р░╕р▒Бр░╢р▒Нр░░р▒Бр░д, р░ор▒А AI р░Жр░░р▒Лр░Чр▒Нр░п р░╕р░╣р░╛р░пр░Хр▒Бр░бр░┐р░ир░┐!",
                initialBotInstruction: "р░ир▒Зр░ир▒Б р░Жр░░р▒Лр░Чр▒Нр░п р░╕р░ор░╕р▒Нр░пр░▓р░др▒Л р░╕р░╣р░╛р░пр░кр░бр░Чр░▓р░ир▒Б. р░кр▒И р░мр░Яр░ир▒Нр░▓р░ир▒Б р░Йр░кр░пр▒Лр░Чр░┐р░Вр░Ър░Вр░бр░┐ р░▓р▒Зр░жр░╛ р░ор▒А р░кр▒Нр░░р░╢р▒Нр░ир░ир▒Б р░Яр▒Ир░кр▒Н р░Ър▒Зр░пр░Вр░бр░┐.",
                typingText: "р░╕р▒Бр░╢р▒Нр░░р▒Бр░д р░Жр░▓р▒Лр░Ър░┐р░╕р▒Нр░др▒Лр░Вр░жр░┐...",
                inputPlaceholder: "р░ор▒А р░кр▒Нр░░р░╢р▒Нр░ир░ир▒Б р░Ер░бр░Чр░Вр░бр░┐...",
                tooltipText: "ЁЯОд р░ор░╛р░Яр▒Нр░▓р░╛р░бр░Яр░╛р░ир░┐р░Хр░┐ р░ор▒Ир░Хр▒НтАМр░ир▒Б р░ир▒Кр░Хр▒Нр░Хр░Вр░бр░┐",
                emergencyResponse: `ЁЯЪи **р░Зр░жр░┐ р░др▒Ар░╡р▒Нр░░р░Вр░Чр░╛ р░Йр░Вр░жр░┐. р░жр░пр░Ър▒Зр░╕р░┐ р░др░Хр▒Нр░╖р░г р░╡р▒Ир░жр▒Нр░п р░╕р░╣р░╛р░пр░В р░др▒Ар░╕р▒Бр░Хр▒Лр░Вр░бр░┐.**<br><br>р░Ьр░╛р░др▒Ар░п р░Ер░др▒Нр░пр░╡р░╕р░░ р░ир░Вр░мр░░р▒НтАМр░Хр▒Б р░Хр░╛р░▓р▒Н р░Ър▒Зр░пр░Вр░бр░┐: <b>112</b><br>р░▓р▒Зр░жр░╛ р░Ер░Вр░мр▒Бр░▓р▒Жр░ир▒Нр░╕р▒Н р░Хр▒Лр░╕р░В р░Хр░╛р░▓р▒Н р░Ър▒Зр░пр░Вр░бр░┐: <b>108</b>`,
                diseaseAlertTitle: "р░ор▒А р░кр▒Нр░░р░╛р░Вр░др░╛р░ир░┐р░Хр░┐ р░Жр░░р▒Лр░Чр▒Нр░п р░╣р▒Жр░Ър▒Нр░Ър░░р░┐р░Хр░▓р▒Б",
                diseaseAlertDengueTitle: "р░бр▒Жр░Вр░Чр▒Нр░пр▒В р░Ьр▒Нр░╡р░░р░В р░Хр▒Зр░╕р▒Бр░▓р▒Б р░кр▒Жр░░р▒Бр░Чр▒Бр░др▒Бр░ир▒Нр░ир░╛р░пр░┐",
                diseaseAlertDengueInfo: "р░кр░░р░┐р░╕р░░р░╛р░▓р░ир▒Б р░╢р▒Бр░нр▒Нр░░р░Вр░Чр░╛ р░Йр░Вр░Ър░бр░В р░ор░░р░┐р░пр▒Б р░ир▒Ар░░р▒Б р░ир░┐р░▓р░┐р░Ър░┐р░кр▒Лр░Хр▒Бр░Вр░бр░╛ р░Ър▒Вр░бр░Яр░В р░жр▒Нр░╡р░╛р░░р░╛ р░жр▒Лр░ор░▓ р░╡р▒Нр░пр░╛р░кр▒Нр░др░┐р░ир░┐ р░ир░┐р░╡р░╛р░░р░┐р░Вр░Ър░Вр░бр░┐.",
                diseaseAlertViralTitle: "р░╕р▒Ар░Ьр░ир░▓р▒Н р░╡р▒Ир░░р░▓р▒Н р░Ьр▒Нр░╡р░░р░В",
                diseaseAlertViralInfo: "р░Жр░░р▒Лр░Чр▒Нр░пр░Хр░░р░ор▒Ир░и р░Жр░╣р░╛р░░р░Вр░др▒Л р░░р▒Лр░Чр░ир░┐р░░р▒Лр░зр░Х р░╢р░Хр▒Нр░др░┐р░ир░┐ р░кр▒Жр░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐ р░ор░░р░┐р░пр▒Б р░╣р▒Ир░бр▒Нр░░р▒Зр░Яр▒Жр░бр▒НтАМр░Чр░╛ р░Йр░Вр░бр░Вр░бр░┐. р░Ьр▒Нр░╡р░░р░В р░др░Чр▒Нр░Чр░Хр░кр▒Лр░др▒З р░╡р▒Ир░жр▒Нр░пр▒Бр░бр░┐р░ир░┐ р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐."
            }
        };

        // --- UI Update Function ---
        function updateUIText(lang) {
            const t = translations[lang] || translations.en; // Fallback to English

            // Update Header
            document.getElementById('disclaimer-banner').innerText = t.disclaimer;
            document.getElementById('main-title').innerText = t.mainTitle;
            document.getElementById('sub-title').innerText = t.subTitle;
            document.getElementById('stat-free-value').innerText = t.statFreeValue;
            document.getElementById('stat-free-label').innerText = t.statFreeLabel;
            document.getElementById('stat-247-value').innerText = t.stat247Value;
            document.getElementById('stat-247-label').innerText = t.stat247Label;

            // Update Quick Actions
            const quickButtons = [
                { id: 'quick-btn-fever', icon: 'ЁЯМбя╕П', text: t.quickBtnFever, query: t.queryFever },
                { id: 'quick-btn-cough', icon: 'ЁЯШд', text: t.quickBtnCough, query: t.queryCough },
                { id: 'quick-btn-vaccine', icon: 'ЁЯТЙ', text: t.quickBtnVaccine, query: t.queryVaccine },
                { id: 'quick-btn-stomach', icon: 'ЁЯдв', text: t.quickBtnStomach, query: t.queryStomach },
                { id: 'quick-btn-diet', icon: 'ЁЯеЧ', text: t.quickBtnDiet, query: t.queryDiet },
                { id: 'quick-btn-mental-health', icon: 'ЁЯза', text: t.quickBtnMentalHealth, query: t.queryMentalHealth },
                { id: 'quick-btn-women', icon: 'ЁЯСйтАНтЪХя╕П', text: t.quickBtnWomen, query: t.queryWomen },
                { id: 'quick-btn-emergency', icon: 'ЁЯЪи', text: t.quickBtnEmergency, query: t.queryEmergency },
            ];
            
            quickButtons.forEach(btnInfo => {
                const btnElement = document.getElementById(btnInfo.id);
                btnElement.innerHTML = `<span class="icon">${btnInfo.icon}</span><span>${btnInfo.text}</span>`;
                btnElement.dataset.query = btnInfo.query;
            });

            // Update Disease Alert
            document.getElementById('disease-alert-title').innerText = t.diseaseAlertTitle;
            document.getElementById('disease-alert-content').innerHTML = `
                <p><strong>${t.diseaseAlertDengueTitle}:</strong> ${t.diseaseAlertDengueInfo}</p>
                <p><strong>${t.diseaseAlertViralTitle}:</strong> ${t.diseaseAlertViralInfo}</p>
            `;

            // Update Initial Message Area
            initialMessageContainer.innerHTML = `
                <div class="help-section">
                    <div class="help-title" id="help-title">${t.helpTitle}</div>
                    <div class="help-list" id="help-list">${t.helpList}</div>
                </div>
                <div class="message bot-message fade-in">
                    <p class="font-bold text-gray-800 mb-3">${t.initialBotGreeting}</p>
                    <p class="text-gray-600">${t.initialBotInstruction}</p>
                </div>`;

            // Update other elements
            document.getElementById('typing-text').innerText = t.typingText;
            messageInput.placeholder = t.inputPlaceholder;
            document.getElementById('tooltip-text').innerText = t.tooltipText;
        }


        // --- Event Listeners ---
        window.addEventListener('load', () => {
            updateUIText(currentLanguage); // Set initial language on load
            initKeyboard(); // Initialize virtual keyboard
        });

        document.getElementById('close-alert-btn').addEventListener('click', () => {
            const banner = document.getElementById('disease-alert');
            banner.style.maxHeight = '0';
            banner.style.paddingTop = '0';
            banner.style.paddingBottom = '0';
            banner.style.marginTop = '0';
            banner.style.marginBottom = '0';
            banner.style.borderWidth = '0';
            banner.style.opacity = '0';
        });

        sendBtn.addEventListener('click', sendMessage);
        messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                sendMessage();
            }
        });
        document.querySelectorAll('.quick-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                messageInput.value = btn.dataset.query;
                sendMessage();
            });
        });
        voiceBtn.addEventListener('click', toggleVoiceRecognition);
        closeTooltipBtn.addEventListener('click', () => voiceTooltip.classList.add('hidden'));
        headerToggleBtn.addEventListener('click', () => {
            document.getElementById('disease-alert').classList.toggle('collapsed');
            quickActions.classList.toggle('collapsed');
            headerToggleIcon.classList.toggle('rotate-180');
        });


        // --- Core Functions ---
        function sendMessage() {
            const userMessage = messageInput.value.trim();
            if (!userMessage || apiKey === "PASTE_YOUR_GOOGLE_AI_API_KEY_HERE") return;

            if (initialMessageContainer.style.display !== 'none') {
                initialMessageContainer.style.display = 'none';
            }

            addMessage(userMessage, 'user');
            messageInput.value = '';
            if (keyboard) {
                keyboard.setInput(""); // Clear keyboard input
            }
            showTypingIndicator(true);
            
            if (isEmergency(userMessage)) {
                const emergencyResponse = getEmergencyResponse(currentLanguage);
                setTimeout(() => {
                    showTypingIndicator(false);
                    addMessage(marked.parse(emergencyResponse), 'bot');
                }, 1000);
            } else {
                callGeminiAPI(userMessage);
            }
        }

        async function callGeminiAPI(prompt) {
            try {
                // Enhanced system prompt for better, safer, and more empathetic responses
                const systemPrompt = `You are Sushruta, an AI health assistant for India. Your primary goal is to provide helpful, safe, and preliminary health information in a calm, empathetic, and reassuring tone. You must respond ONLY in the user's selected language: ${currentLanguage}.

                **CRITICAL SAFETY INSTRUCTIONS:**
                1.  **ALWAYS start your response with a clear disclaimer:** "тЪая╕П **Disclaimer:** This is for informational purposes only and not a substitute for professional medical advice. Please consult a doctor for any health concerns." (Translate this disclaimer accurately to the user's language).
                2.  **NEVER provide a diagnosis.** You can list possible symptoms or causes, but you must never state what condition the user has. Frame suggestions carefully, e.g., "Some people find relief by..."
                3.  **FOR ANY SERIOUS SYMPTOMS** (e.g., chest pain, difficulty breathing, severe bleeding, high fever in infants, confusion, sudden weakness), immediately advise the user to seek emergency medical help. Provide the national emergency number (112) and ambulance number (108).
                4.  **KEEP INFORMATION GENERAL.** Avoid specific dosages for medications. Recommend consulting a doctor or pharmacist for treatment plans and medication advice.
                5.  **USE SIMPLE LANGUAGE.** Avoid complex medical jargon. Explain concepts clearly and concisely.

                **CONTENT & FORMATTING GUIDELINES:**
                - **Use Markdown for formatting.** Use headings, bold text, and bulleted lists (\`*\` or \`-\`) to structure information and make it easy to read.
                - **Use emojis** to make the content more friendly and approachable (e.g., ЁЯй║, ЁЯЩП, ЁЯШК, ЁЯеЧ).
                - **Structure your response clearly:**
                    1.  Mandatory Disclaimer (Translated).
                    2.  Empathetic acknowledgment of the user's query.
                    3.  Clear, structured answer using Markdown.
                    4.  Actionable, safe recommendations (e.g., "Consider speaking to a doctor," "You might find it helpful to...").

                **NEW INSTRUCTION: PROVIDING DOCTOR INFORMATION**
                After you provide the health information for the user's query, you MUST add a new section titled "### ЁЯй║ Find a Specialist (Examples)".
                In this section, you must:
                1.  Identify the relevant medical specialty for the user's query (e.g., for a skin rash, the specialty is Dermatology; for a heart issue, it's Cardiology; for fever or cold, it is General Medicine).
                2.  Search the "INTERNAL KNOWLEDGE BASE" provided below for doctors or departments matching that specialty.
                3.  List a few relevant examples of doctors or departments you find. Include their name, designation, and hospital.
                4.  **CRITICALLY IMPORTANT:** You MUST include the following disclaimer at the end of this section: "Please note: This is a sample list based on publicly available data and may not be current or complete. Please contact the hospital directly to confirm doctor availability and book an appointment." (Translate this disclaimer to the user's language).
                5.  If you cannot find a relevant specialist in the knowledge base, state that you don't have specific doctor information for this condition and recommend contacting a major government hospital for a referral.

                ---

                **INTERNAL KNOWLEDGE BASE: DOCTOR DIRECTORY (SAMPLE DATA)**

                **1. Nil Ratan Sircar (NRS) Medical College & Hospital, Kolkata, West Bengal (Heads of Departments)**
                - Anaesthesiology: Dr. Dipankar Mukherjee
                - Anatomy: Dr. Sudeshna Majumdar
                - Biochemistry: Dr. Indranil Dawn
                - Cardiac Anaesthesiology: Dr. Sampa Dutta Gupta
                - Cardio Thoracic & Vascular Surgery: Dr. Binay Krishna Sarkar
                - Cardiology: Prof. (Dr.) Manoranjan Mandal
                - Community Medicine: Dr. Dibakar Haldar
                - Dentistry: Dr. Subhas Chakraborty
                - Dermatology: Dr. Arun Achar
                - Endocrinology: Dr. Nilanjan Sengupta
                - Forensic Medicine & Toxicology: Dr. Saurabh Chattopadhyay
                - Gastroenterology: Dr. Manas Kumar Mondal
                - General Medicine: Dr. Milan Chakraborty
                - General Surgery: Dr. Sankar Das Chattopadhyay
                - Gynecology & Obstetrics: Dr. Runa Bal
                - Haematology: Dr. Tuphan Kanti Dolai
                - Microbiology: Prof. (Dr) Jayanta Bikash Dey
                - Nephrology: Dr. Pinaki Mukhopadhyay
                - Neuro Surgery: Dr. Kaushik Roy
                - Neurology: Prof. (Dr) Kartik Chandra Ghosh
                - Ophthalmology: Dr. Udayaditya Mukhopadhyay
                - Orthopedics: Dr. Gopinath Maiti
                - Otorhinolaryngology (ENT): Dr. Sumanta Kumar Dutta
                - Paediatric Surgery: Dr. Kalyani Saha Basu
                - Paediatrics Medicine: Dr. Asim Kr Mallick
                - Pathology: Dr. Gopinath Barui
                - Pharmacology: Dr. Pragnadyuti Mandal
                - Physical Medicine & Rehabilitation: Dr. Partha Pratim Das
                - Physiology: Dr. Suranjana Sur Mukherjee
                - Plastic Surgery: Dr. Dibyendu Das
                - Psychiatry: Dr. Asish Mukhopadhyay
                - Radio Diagnosis: Dr. Runa Das
                - Radio Therapy (Radiation Oncology): Dr. Suman Ghorai
                - Respiratory Medicine: Dr. Jaydip Deb
                - Urology: Dr. Tapan Kumar Mandal

                **2. Sheikh Bhikhari Medical College & Hospital, Hazaribag, Jharkhand**
                - **Medicine:** DR S K SINGH (Professor & Principal), DR S. K. SINHA (Professor & HOD), DR SMITA PRIYADARSHINI (Assistant Professor), DR HIMANSHU KR. BHAIYA (Assistant Professor), DR SOMA ORAON (Assistant Professor), DR ANIL KUMAR (Assistant Professor).
                - **Surgery:** DR VINOD KUMAR (Professor), DR OM PRAKASH SRIVASTAVA (Associate Professor), DR A. K. CHOUDHARY (Associate Professor), DR GAUTAM CHANDRA DR ABHISHEK KUMAR (Assistant Professor), DR UTKRISHT KANT (Assistant Professor), DR SUMEGHA RANA (Assistant Professor), DR ANJANA GANDHI DR VIVEK BHASKER (Assistant Professor), DR MRIGENDRA RAI (Assistant Professor).
                - **Obstetrics & Gynecology (OBGY):** DR SWETA LAL (Assistant Professor), Dr Rameshwari Beck (Assistant Professor).
                - **Eye (Ophthalmology):** DR K. K. LAL (Professor).
                - **Ear, Nose, and Throat (ENT):** DR PRADEEP KUMAR SINGGH (Professor), Dr. RAKHI KUMARI (Assistant Professor).
                - **Paediatrics:** DR CHITIZ ANAND (Assistant Professor).
                - **Skin & VD (Dermatology):** DR. FIRDOUS JAHAN (Assistant Professor).
                - **Orthopaedics:** DR. PAWAN KUMAR (Professor), DR RUPESH KUMAR (Associate Professor), DR. SHANKAR NIWAS (Assistant Professor), DR SHASHI KANT SINGH (Assistant Professor).
                - **Anaesthesia:** DR. SHASHI DINKAR MINZ (Professor), DR. SANJEEV KUMAR (Associate Professor), DR. PIYUSH KUMAR SENGAR (Assistant Professor), DR INDRAJIT GUPTA (Assistant Professor).
                - **Psychiatry:** DR. RAJSHREE (Assistant Professor), DR SHAHANAWAJ ZAFAR (Assistant Professor).
                - **Dentistry:** DR KOYNA MITRA (Professor), DR RATHORE DHANANJAY GOVIND SINGH (Associate Professor).

                **3. MKCG Medical College & Hospital, Berhampur, Odisha**
                - **Anaesthesiology:** Dr. Harikrishna Dalai (Professor), Prof Dr Khageswar Raut (Professor), Dr. Jyoshna Mishra (Professor), Dr. Bimal Prasad Sahu (Associate Professor), Dr. S Sanjeeb Patro (Associate Professor), Dr. Bishnu Prasad Mohapatra (Associate Professor), Dr. Siba Prasad Das (Associate Professor), Dr. Bipin Bihari Malik (Assistant Professor), Dr. Manas Kumar Nahak (Assistant Professor), Dr. Nibedita Patnaik (Assistant Professor), Dr. Pankaj Kumar Sethy (Assistant Professor), Dr. Anup Kumar Harichandan (Assistant Professor), Dr. Chittranjan Pradhan (Assistant Professor), Dr. Jagdeep Nayak (Assistant Professor), Dr. Kunal Patra (Assistant Professor), Dr. Mrutyunjaya Mallick (Assistant Professor), Dr. Jayanta Pattanaik (Assistant Professor).`;

                const payload = {
                    contents: [{ parts: [{ text: prompt }] }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };

                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API call failed with status: ${response.status}`);
                }

                const result = await response.json();
                const botResponse = result.candidates?.[0]?.content?.parts?.[0]?.text || "I'm sorry, I couldn't process that. Could you try rephrasing?";
                
                // Parse the Markdown response to HTML
                addMessage(marked.parse(botResponse), 'bot');

            } catch (error) {
                console.error("Error calling Gemini API:", error);
                addMessage("I'm having trouble connecting right now. Please try again later.", 'bot');
            } finally {
                showTypingIndicator(false);
            }
        }

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            messageDiv.innerHTML = text; // Use innerHTML directly as text is now parsed HTML
            chatArea.appendChild(messageDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function showTypingIndicator(show) {
            typingIndicator.style.display = show ? 'flex' : 'none';
            if (show) {
                chatArea.scrollTop = chatArea.scrollHeight;
            }
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`lang-${lang}`).classList.add('active');
            updateUIText(lang);
            // Update keyboard layout
            if (keyboard) {
                keyboard.setOptions({
                    layout: keyboardLayouts[lang],
                    layoutName: 'default' // Reset to default layout on language change
                });
            }
        }

        // --- Voice Recognition ---
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;
        let isListening = false;
        
        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            
            recognition.onstart = () => {
                isListening = true;
                voiceBtn.classList.add('listening');
            };
            
            recognition.onend = () => {
                isListening = false;
                voiceBtn.classList.remove('listening');
            };
            
            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                messageInput.value = transcript;
                sendMessage();
            };
            
            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
            };

        } else {
            voiceBtn.style.display = 'none'; // Hide voice button if not supported
        }

        function toggleVoiceRecognition() {
            if (!recognition) return;
            
            if (isListening) {
                recognition.stop();
            } else {
                recognition.lang = getLangCodeForVoice(currentLanguage);
                recognition.start();
            }
        }
        
        function getLangCodeForVoice(lang) {
            const langMap = {
                'en': 'en-IN',
                'hi': 'hi-IN',
                'bn': 'bn-IN',
                'ta': 'ta-IN',
                'od': 'or-IN',
                'te': 'te-IN'
            };
            return langMap[lang] || 'en-IN';
        }
        
        // --- Emergency Detection ---
        function isEmergency(text) {
            const emergencyKeywords = [
                // English
                'chest pain', 'heart attack', 'stroke', 'can\'t breathe', 'not breathing', 'severe bleeding', 'unconscious', 'poison', 'suicide', 'emergency', 'accident', 'seizure',
                // Hindi (and other regional languages)
                'рдЫрд╛рддреА рдореЗрдВ рджрд░реНрдж', 'рджрд┐рд▓ рдХрд╛ рджреМрд░рд╛', 'рд▓рдХрд╡рд╛', 'рд╕рд╛рдВрд╕ рдирд╣реАрдВ рд▓реЗ рдкрд╛ рд░рд╣рд╛', 'рдмреЗрд╣реЛрд╢', 'рдЧрдВрднреАрд░ рд░рдХреНрддрд╕реНрд░рд╛рд╡', 'рдЬрд╣рд░', 'рдЖрддреНрдорд╣рддреНрдпрд╛', 'рдЖрдкрд╛рддрдХрд╛рд▓реАрди', 'рджреБрд░реНрдШрдЯрдирд╛'
            ];
            const lowerText = text.toLowerCase();
            return emergencyKeywords.some(keyword => lowerText.includes(keyword));
        }

        function getEmergencyResponse(lang) {
            const t = translations[lang] || translations.en;
            return t.emergencyResponse;
        }

        // Show voice tooltip on first visit
        if (!localStorage.getItem('visitedSushruta')) {
            setTimeout(() => {
                voiceTooltip.classList.remove('hidden');
            }, 2000);
            localStorage.setItem('visitedSushruta', 'true');
        }

        // --- Virtual Keyboard Logic ---
        const Keyboard = window.SimpleKeyboard.default;
        let keyboard;
        const languageCycle = ['en', 'hi', 'bn', 'ta', 'od', 'te'];

        const keyboardLayouts = {
            en: {
                'default': [
                    'q w e r t y u i o p', 'a s d f g h j k l', '{shift} z x c v b n m {backspace}', '{next} {space} {hide} {enter}'
                ],
                'shift': [
                    'Q W E R T Y U I O P', 'A S D F G H J K L', '{shift} Z X C V B N M {backspace}', '{next} {space} {hide} {enter}'
                ]
            },
            hi: {
                'default': [
                    'реМ реИ рд╛ реА реВ реВ реЗ реЛ реН реГ {backspace}',
                    'рдд рде рдж рдз рди рдк рдл рдм рдн рдо',
                    'рдп рд░ рд▓ рд╡ рд╢ рд╖ рд╕ рд╣ рдЪ рдЫ рдЬ рдЭ',
                    'рдХрд╝ рдЦ рдЧрд╝ рдЬрд╝ рдбрд╝ рдврд╝ рдлрд╝ рдпрд╝ реЙ рдЮ',
                    '{shift} {next} {space} {hide} {enter}'
                ],
                'shift': [
                    'рдФ рдР рдЖ рдИ рдК рдм рдн рд░реН рдЬреНрдЮ рдЛ реР',
                    'рддреН рдереН рджреН рдзреН рдиреН рдкреН рдлреН рдмреН рднреН рдореН',
                    'рдпреН рд░реН рд▓реН рд╡реН рд╢реН рд╖реН рд╕реН рд╣реН рдЪреН рдЫреН рдЬреН рдЭреН',
                    'рдЯ рда рдб рдв рдг рдХ рдЦ рдЧ рдШ рдЩ рдЮреН',
                    '{shift} {next} {space} {hide} {enter}'
                ]
            },
            bn: {
                'default': [
                    'рзМ рзИ рж╛ рзА рзБ рзВ рзЗ рзЛ рзН рзГ {backspace}',
                    'ржд рже ржж ржз ржи ржк ржл ржм ржн ржо',
                    'ржп рж░ рж▓ ржм рж╢ рж╖ рж╕ рж╣ ржЪ ржЫ ржЬ ржЭ ржЮ',
                    'ржЯ ржа ржб ржв ржг ржХ ржЦ ржЧ ржШ ржЩ',
                    '{shift} {next} {space} {hide} {enter}'
                ],
                'shift': [
                    'ржФ ржР ржЕ ржЗ ржЙ ржК ржЛ ржП ржР ржУ ржФ',
                    'рзО ржерзН ржжрзН ржзрзН ржирзН ржкрзН ржлрзН ржмрзН ржнрзН ржорзН',
                    'ржпрзН рж░ рзН рж▓рзН ржмрзН рж╢рзН рж╖ рзН рж╕рзН рж╣рзН ржЪрзН ржЫрзН ржЬрзН ржЭрзН ржЮрзН',
                    'ржЯрзН ржарзН ржбрзН ржврзН ржгрзН ржХрзН ржЦрзН ржЧрзН ржШрзН ржЩрзН',
                    '{shift} {next} {space} {hide} {enter}'
                ]
            },
            ta: {
                'default': [
                    'роХ роЪ роЯ род рок роп ро░ ро▓ ро╡ ро┤ ро│ {backspace}', 
                    'роЕ роЖ роЗ роИ роЙ роК роО роП роР роТ роУ роФ', 
                    'рпН ро╛ ро┐ рпА рпБ рпВ рпЖ рпЗ рпИ рпК рпЛ рпМ роГ', 
                    '{shift} {next} {space} {hide} {enter}'
                ],
                'shift': [
                    'роЩ роЮ рог рои роо рой ро▒ рой', 
                    'роХрпН роЪрпН роЯрпН родрпН рокрпН ропрпН ро░рпН ро▓рпН ро╡рпН ро┤рпН ро│рпН', 
                    'роЬрпН ро╖рпН ро╕рпН ро╣рпН ро╕рпНро░рпА {backspace}', 
                    '{shift} {next} {space} {hide} {enter}'
                ]
            },
             od: {
                'default': [
                    'рнМ рнИ рм╛ рнА рнВ рнД рнЗ рнЛ рнН рнГ {backspace}',
                    'рмд рме рмж рмз рми рмк рмл рмм рмн рмо',
                    'рмп рм░ рм▓ рм╡ рм╢ рм╖ рм╕ рм╣ рмЪ рмЫ рмЬ рмЭ рмЮ',
                    'рмЯ рма рмб рмв рмг рмХ рмЦ рмЧ рмШ рмЩ',
                    '{shift} {next} {space} {hide} {enter}'
                ],
                'shift': [
                    'рмФ ржР рмЖ рмИ рмЙ рмК рмЛ рмП рмУ рмФ',
                    'рмдрнН рмернН рмжрнН рмзрнН рми рмкрнН рмлрнН рммрнН рмнрнН рморнН',
                    'рмпрнН рм░рнН рм▓рнН рм╡рнН рм╢рнН рм╖рнН рм╕рнН рм╣рнН рмЪрнН рмЫрнН рмЬрнН рмЭрнН рмЮрнН',
                    'рмЯрнН рмарнН рмбрнН рмврнН рмг рмХрнН рмЦрнН рмЧрнН рмШрнН рмЩрнН',
                    '{shift} {next} {space} {hide} {enter}'
                ]
            },
            te: {
                 'default': [
                    'р▒М р▒И р░╛ р▒А р▒Б р▒В р▒Ж р▒Л р▒Н р▒Г {backspace}',
                    'р░д р░е р░ж р░з р░и р░к р░л р░м р░н р░о',
                    'р░п р░░ р░▓ р░╡ р░╢ р░╖ р░╕ р░╣ р░Ъ р░Ы р░Ь р░Э р░Ю',
                    'р░Я р░а р░б р░в р░г р░Х р░Ц р░Ч р░Ш р░Щ',
                    '{shift} {next} {space} {hide} {enter}'
                ],
                'shift': [
                    'р░Ф р░Р р░Ж р░И р░Й р░К р░Л р░О р░П р░Т р░У',
                    'р░др▒Н р░ер▒Н р░жр▒Н р░зр▒Н р░и р░кр▒Н р░лр▒Н р░мр▒Н р░нр▒Н р░ор▒Н',
                    'р░пр▒Н р░░р▒Н р░▓ р░╡ р░╢ р░╖ р░╕ р░╣ р░Ъ р░Ы р░Ь р░Э р░Ю',
                    'р░Яр▒Н р░ар▒Н р░бр▒Н р░вр▒Н р░гр▒Н р░Хр▒Н р░Цр▒Н р░Чр▒Н р░Шр▒Н р░Щр▒Н',
                    '{shift} {next} {space} {hide} {enter}'
                ]
            }
        };

        function initKeyboard() {
            keyboard = new Keyboard({
                onChange: input => onKeyboardChange(input),
                onKeyPress: button => onKeyPress(button),
                layoutName: "default", // Always start with default layout
                layout: keyboardLayouts[currentLanguage],
                display: {
                    '{next}': 'ЁЯМР',
                    '{enter}': 'Send',
                    '{shift}': 'Shift',
                    '{space}': ' ',
                    '{backspace}': 'тМл',
                    '{hide}': 'Done'
                }
            });
        }
        
        function onKeyboardChange(input) {
            messageInput.value = input;
        }

        function onKeyPress(button) {
            if (button === "{shift}" || button === "{lock}") handleShift();
            if (button === "{enter}") sendMessage();
            if (button === "{next}") handleNextLanguage();
            if (button === "{hide}") hideKeyboard();
        }

        function handleShift() {
            const currentLayout = keyboard.options.layoutName;
            const newLayoutName = currentLayout === "default" ? "shift" : "default";
            keyboard.setOptions({
                layoutName: newLayoutName
            });
        }

        function handleNextLanguage() {
            const currentIndex = languageCycle.indexOf(currentLanguage);
            const nextIndex = (currentIndex + 1) % languageCycle.length;
            const nextLang = languageCycle[nextIndex];
            setLanguage(nextLang);
        }

        function showKeyboard() {
            keyboardContainer.classList.add('visible');
            chatArea.classList.add('chat-area-with-keyboard');
            keyboardBtn.classList.add('active');
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function hideKeyboard() {
            keyboardContainer.classList.remove('visible');
            chatArea.classList.remove('chat-area-with-keyboard');
            keyboardBtn.classList.remove('active');
        }

        keyboardBtn.addEventListener('click', () => {
            const isVisible = keyboardContainer.classList.contains('visible');
            if (isVisible) {
                hideKeyboard();
            } else {
                showKeyboard();
            }
        });

    </script>
</body>
</html>



